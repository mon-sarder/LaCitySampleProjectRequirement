<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Search Products</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body class="search-container">
  <header style="text-align:center; margin-bottom:12px;">
    Signed in as <strong>{{ username }}</strong> |
    <a href="{{ url_for('logout') }}">Logout</a>
  </header>

  <h1>Search Products</h1>

  <form method="POST" style="justify-content:center; display:flex; gap:10px;">
    <input type="text" name="query" value="{{ query or '' }}"
           placeholder="Type a category (e.g., Travel)" autocomplete="off" inputmode="search" />
    <button type="submit">Search</button>
    <button type="submit" name="list_all" value="1">Show available categories</button>
    <a class="btn" href="{{ url_for('categories_page') }}">Open categories page</a>
  </form>

  {% if error %}
    <p class="flash error" style="margin-top:10px;">{{ error }}</p>
  {% endif %}
  {% if message %}
    <p class="flash info" style="margin-top:10px;">{{ message }}</p>
  {% endif %}

  {% if choices %}
    <div class="category-list" style="margin-top:10px;">
      {% for c in choices %}
        <a class="category-chip" href="{{ url_for('search_page') }}?query={{ c }}">{{ c }}</a>
      {% endfor %}
    </div>
  {% endif %}

  {% if picked %}
    <h3 style="text-align:center; margin-top:16px;">Category: {{ picked }}</h3>
  {% endif %}
  {% if meta %}
    <p style="text-align:center; color:#64748b;">{{ meta }}</p>
  {% endif %}

  {% if items %}
    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap:14px; margin-top:16px;">
      {% for item in items %}
        <div class="auth-card">
          <div style="font-weight:600; margin-bottom:6px;">{{ item.title }}</div>
          <div style="color:#2563eb;">{{ item.price }}</div>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</body>
</html>
